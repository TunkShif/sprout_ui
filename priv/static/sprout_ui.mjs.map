{
  "version": 3,
  "sources": ["../../assets/js/sprout_ui/components/modal.ts"],
  "sourcesContent": ["import { SproutEvent, SproutStates } from \"../types\"\n\n// TODO: helper function for switching data attribute\n\ntype ModalShowEvent = SproutEvent<{ disable_scrolling: boolean }>\ntype ModalHideEvent = SproutEvent<{ await_animation: boolean; disable_scrolling: boolean }>\n\nconst queryModalParts = (modal: HTMLElement) => {\n  const overlay = modal.querySelector(`[data-part=overlay]`)\n  const container = modal.querySelector(`[data-part=container]`)\n  return [modal, overlay, container] as const\n}\n\nconst toggleScrolling = (to: \"enable\" | \"disable\", disabled: boolean) => {\n  if (!disabled) return\n  switch (to) {\n    case \"enable\":\n      Object.assign(document.body.style, { overflow: \"\" })\n      break\n    case \"disable\":\n      Object.assign(document.body.style, { overflow: \"hidden\" })\n      break\n    default:\n      break\n  }\n}\n\nwindow.addEventListener(\"sprt:modal:open\", (e) => {\n  const { target, detail } = e as ModalShowEvent\n  queryModalParts(target as HTMLElement).forEach((el) =>\n    el?.setAttribute(\"data-state\", SproutStates.OPEN)\n  )\n  toggleScrolling(\"disable\", detail.disable_scrolling)\n})\n\nwindow.addEventListener(\"sprt:modal:close\", (e) => {\n  const { target, detail } = e as ModalHideEvent\n  const [modal, overlay, container] = queryModalParts(target)\n\n  overlay?.setAttribute(\"data-state\", SproutStates.CLOSED)\n  container?.setAttribute(\"data-state\", SproutStates.CLOSED)\n\n  toggleScrolling(\"enable\", detail.disable_scrolling)\n\n  if (detail.await_animation) {\n    const handler = () => {\n      modal.setAttribute(\"data-state\", SproutStates.CLOSED)\n      modal.removeEventListener(\"animationend\", handler, false)\n    }\n    modal.addEventListener(\"animationend\", handler, false)\n  } else {\n    modal.setAttribute(\"data-state\", SproutStates.CLOSED)\n  }\n})\n"],
  "mappings": ";AAOA,IAAM,kBAAkB,CAAC,UAAuB;AAC9C,QAAM,UAAU,MAAM,cAAc,qBAAqB;AACzD,QAAM,YAAY,MAAM,cAAc,uBAAuB;AAC7D,SAAO,CAAC,OAAO,SAAS,SAAS;AACnC;AAEA,IAAM,kBAAkB,CAAC,IAA0B,aAAsB;AACvE,MAAI,CAAC;AAAU;AACf,UAAQ,IAAI;AAAA,IACV,KAAK;AACH,aAAO,OAAO,SAAS,KAAK,OAAO,EAAE,UAAU,GAAG,CAAC;AACnD;AAAA,IACF,KAAK;AACH,aAAO,OAAO,SAAS,KAAK,OAAO,EAAE,UAAU,SAAS,CAAC;AACzD;AAAA,IACF;AACE;AAAA,EACJ;AACF;AAEA,OAAO,iBAAiB,mBAAmB,CAAC,MAAM;AAChD,QAAM,EAAE,QAAQ,OAAO,IAAI;AAC3B,kBAAgB,MAAqB,EAAE;AAAA,IAAQ,CAAC,OAC9C,yBAAI,aAAa;AAAA,EACnB;AACA,kBAAgB,WAAW,OAAO,iBAAiB;AACrD,CAAC;AAED,OAAO,iBAAiB,oBAAoB,CAAC,MAAM;AACjD,QAAM,EAAE,QAAQ,OAAO,IAAI;AAC3B,QAAM,CAAC,OAAO,SAAS,SAAS,IAAI,gBAAgB,MAAM;AAE1D,qCAAS,aAAa;AACtB,yCAAW,aAAa;AAExB,kBAAgB,UAAU,OAAO,iBAAiB;AAElD,MAAI,OAAO,iBAAiB;AAC1B,UAAM,UAAU,MAAM;AACpB,YAAM,aAAa,mCAAiC;AACpD,YAAM,oBAAoB,gBAAgB,SAAS,KAAK;AAAA,IAC1D;AACA,UAAM,iBAAiB,gBAAgB,SAAS,KAAK;AAAA,EACvD,OAAO;AACL,UAAM,aAAa,mCAAiC;AAAA,EACtD;AACF,CAAC;",
  "names": []
}
