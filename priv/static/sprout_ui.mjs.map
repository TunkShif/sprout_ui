{
  "version": 3,
  "sources": ["../../assets/js/sprout_ui/components/modal.ts", "../../assets/node_modules/.pnpm/@tunkshif+vanilla-transition@0.1.2/node_modules/@tunkshif/vanilla-transition/dist/vanilla-transition.mjs", "../../assets/js/sprout_ui/components/transition.ts", "../../assets/js/sprout_ui/index.ts"],
  "sourcesContent": ["import type { SproutComponentSetup, SproutEvent } from \"../types\"\n\n// TODO: helper function for switching data attribute\n\ntype ModalShowEvent = SproutEvent<{ disable_scrolling: boolean }>\ntype ModalHideEvent = SproutEvent<{ await_animation: boolean; disable_scrolling: boolean }>\n\nenum SproutStates {\n  OPEN = \"open\",\n  CLOSED = \"closed\"\n}\n\nconst queryModalParts = (modal: HTMLElement) => {\n  const overlay = modal.querySelector(`[data-part=overlay]`)\n  const container = modal.querySelector(`[data-part=container]`)\n  return [modal, overlay, container] as const\n}\n\nconst toggleScrolling = (to: \"enable\" | \"disable\", disabled: boolean) => {\n  if (!disabled) return\n  switch (to) {\n    case \"enable\":\n      Object.assign(document.body.style, { overflow: \"\" })\n      break\n    case \"disable\":\n      Object.assign(document.body.style, { overflow: \"hidden\" })\n      break\n    default:\n      break\n  }\n}\n\nconst init = () => {\n  window.addEventListener(\"sprt:modal:open\", (e) => {\n    const { target, detail } = e as ModalShowEvent\n    queryModalParts(target as HTMLElement).forEach((el) =>\n      el?.setAttribute(\"data-state\", SproutStates.OPEN)\n    )\n    toggleScrolling(\"disable\", detail.disable_scrolling)\n  })\n\n  window.addEventListener(\"sprt:modal:close\", (e) => {\n    const { target, detail } = e as ModalHideEvent\n    const [modal, overlay, container] = queryModalParts(target)\n\n    overlay?.setAttribute(\"data-state\", SproutStates.CLOSED)\n    container?.setAttribute(\"data-state\", SproutStates.CLOSED)\n\n    toggleScrolling(\"enable\", detail.disable_scrolling)\n\n    if (detail.await_animation) {\n      const handler = () => {\n        modal.setAttribute(\"data-state\", SproutStates.CLOSED)\n        modal.removeEventListener(\"animationend\", handler, false)\n      }\n      modal.addEventListener(\"animationend\", handler, false)\n    } else {\n      modal.setAttribute(\"data-state\", SproutStates.CLOSED)\n    }\n  })\n}\n\nconst modal: SproutComponentSetup = () => ({\n  init\n})\n\nexport default modal\n", "const m = (t) => ({\n  enter: t.dataset.enter,\n  enterFrom: t.dataset.enterFrom,\n  enterTo: t.dataset.enterTo,\n  leave: t.dataset.leave,\n  leaveFrom: t.dataset.leaveFrom,\n  leaveTo: t.dataset.leaveTo\n}), u = (t, s) => {\n  const a = () => {\n    s(), t.removeEventListener(\"transitionend\", a, !1);\n  };\n  t.addEventListener(\"transitionend\", a, !1);\n}, l = (t, s, a) => {\n  const e = Object.fromEntries(\n    Object.entries(a).map(([c, r]) => {\n      var d;\n      return [c, (d = r == null ? void 0 : r.split(\" \").filter(Boolean)) != null ? d : []];\n    })\n  );\n  let n, i, o;\n  switch (s) {\n    case \"show\":\n      n = e.enter, i = e.enterFrom, o = e.enterTo;\n      break;\n    case \"hide\":\n      n = e.leave, i = e.leaveFrom, o = e.leaveTo;\n      break;\n  }\n  s === \"show\" && (t.removeAttribute(\"hidden\"), t.style.display = \"\"), t.classList.add(...n, ...i), requestAnimationFrame(() => {\n    requestAnimationFrame(() => {\n      t.classList.remove(...i), t.classList.add(...o), u(t, () => {\n        t.classList.remove(...n), s === \"hide\" && (t.style.display = \"none\");\n      });\n    });\n  });\n}, b = (t, s, a) => {\n  const e = Object.assign(\n    {\n      attribute: \"data-transition-state\",\n      states: {\n        show: \"show\",\n        hide: \"hide\"\n      }\n    },\n    a\n  ), n = s.getAttribute(e.attribute), i = m(t);\n  n === e.states.hide ? t.style.display = \"none\" : t.style.display = \"\";\n  const o = new MutationObserver((c) => {\n    for (const r of c)\n      if (r.attributeName === e.attribute) {\n        const d = s.getAttribute(e.attribute) === e.states.show ? \"show\" : \"hide\";\n        l(t, d, i);\n      }\n  });\n  return o.observe(s, { attributes: !0 }), () => o.disconnect();\n}, f = {\n  init: b\n};\ntypeof window < \"u\" && (window.VanillaTransition = f);\nexport {\n  f as default\n};\n", "import VanillaTransition from \"@tunkshif/vanilla-transition\"\nimport type { SproutHook, SproutComponentSetup } from \"../types\"\n\nconst Hook = {\n  getConfig() {\n    return {\n      observing: this.el.dataset.observeOn,\n      options: {\n        attribute: this.el.dataset.observeAttr,\n        states: {\n          show: this.el.dataset.observeStateShow,\n          hide: this.el.dataset.observeStateHide\n        }\n      }\n    }\n  },\n  mounted() {\n    const config = this.getConfig()\n    const observing = document.querySelector<HTMLElement>(config.observing) || this.el\n    this.cleanup = VanillaTransition.init(this.el, observing, config.options)\n  },\n  destroyed() {\n    this.cleanup()\n  }\n} as SproutHook\n\nconst transition: SproutComponentSetup = (opts) => ({\n  hook: () => {\n    const name = opts?.hook ?? \"Transition\"\n    return { [name]: Hook }\n  },\n  handleDomChange: (from, to) => {\n    if (from.dataset.observeOn) {\n      if (from.getAttribute(\"style\") === null) {\n        to.removeAttribute(\"style\")\n      } else {\n        to.setAttribute(\"style\", from.getAttribute(\"style\")!)\n      }\n    }\n  }\n})\n\nexport default transition\n", "import type { SproutComponent, SproutHook } from \"./types\"\n\ntype CreateSproutConfigOptions = {\n  components: SproutComponent[]\n}\n\ntype CreateSproutConfig = (opts: CreateSproutConfigOptions) => {\n  initComponents: () => void\n  hooks: { [key: string]: SproutHook }\n  handleDomChange: (from: HTMLElement, to: HTMLElement) => void\n}\n\nconst createSproutConfig: CreateSproutConfig = (opts) => {\n  const components = opts.components\n  return {\n    initComponents: () => {\n      components.forEach((comp) => comp.init?.())\n    },\n    hooks: Object.assign({}, ...components.map((comp) => comp.hook?.())),\n    handleDomChange: (from: HTMLElement, to: HTMLElement) => {\n      components.forEach((comp) => comp.handleDomChange?.(from, to))\n    }\n  }\n}\n\nexport default createSproutConfig\nexport * from \"./components\"\n"],
  "mappings": "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",
  "names": ["modal"]
}
